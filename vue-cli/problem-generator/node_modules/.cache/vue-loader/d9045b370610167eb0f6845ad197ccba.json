{"remainingRequest":"/home/jacob/problem-generator/vue-cli/problem-generator/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jacob/problem-generator/vue-cli/problem-generator/src/components/BinaryOperatorInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jacob/problem-generator/vue-cli/problem-generator/src/components/BinaryOperatorInput.vue","mtime":1603149626464},{"path":"/home/jacob/problem-generator/vue-cli/problem-generator/node_modules/cache-loader/dist/cjs.js","mtime":1603340804419},{"path":"/home/jacob/problem-generator/vue-cli/problem-generator/node_modules/babel-loader/lib/index.js","mtime":1603340804387},{"path":"/home/jacob/problem-generator/vue-cli/problem-generator/node_modules/cache-loader/dist/cjs.js","mtime":1603340804419},{"path":"/home/jacob/problem-generator/vue-cli/problem-generator/node_modules/vue-loader/lib/index.js","mtime":1603340805411}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCgppbXBvcnQge1NRUlRfS0VZLCBTUVJUX1NZTSwgRXhwcn0gZnJvbSAnLi4vbGliL2V4cHIuanMnOwoKY29uc3QgRkxPQVRfSU5GID0gMWUxMDsKCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICdCaW5hcnlPcGVyYXRvcklucHV0JywKCXByb3BzOiBbInJvb3QiLCAicm93IiwgImNvbCIsICJkYXRhIiwgIm9wIiwgImNoYXJ0IiwgImEiLCAiYiJdLAoJCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJdXNlcl9hbnN3ZXI6ICIiCgkJfQoJfSwKCW1vdW50ZWQoKSB7CgkJdGhpcy5yb290LmFuc3dlcl9pbnB1dHNbdGhpcy4kdm5vZGUua2V5XSA9IHRoaXM7CgkJaWYgKHRoaXMucm93ID09IHRoaXMuY2hhcnQucmFuZ2Vfc3RhcnQoKSAmJiB0aGlzLmNvbCA9PSB0aGlzLmNoYXJ0LnJhbmdlX3N0YXJ0KCkpCgkJewoJCQlsZXQgaWQgPSB0aGlzLnJvb3QuZ2V0X2lucHV0X2lkKDAsIDApOwoJCQlsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CgkJCWlmIChlbCkKCQkJCWVsLmZvY3VzKCk7CgkJfQoJfSwKCWNvbXB1dGVkOiB7CgkJaW5wdXRfdHlwZSgpIHsKCQkJc3dpdGNoICh0aGlzLm9wKQoJCQl7CgkJCQljYXNlICJ0cmlnIjogcmV0dXJuICJ0ZXh0IjsKCQkJCWRlZmF1bHQ6IHJldHVybiAibnVtYmVyIjsKCQkJfQoJCX0sCgkJdGFibGVfZW5kKCkgewoJCQlyZXR1cm4gdGhpcy5yb290LnRhYmxlX2xlbiAtIHRoaXMuY2hhcnQucmFuZ2Vfc3RhcnQoKQoJCX0KCX0sCgltZXRob2RzOiB7CgkJc2V0X2hpbnQoKSB7CgkJCWlmICghdGhpcy5yb290LmhpbnQpCgkJCQlyZXR1cm47CgkJCXRoaXMucm9vdC5oaW50LnVwZGF0ZSh0aGlzLmEsIHRoaXMuYik7CgkJfSwKCQljbGVhcl9oaW50KCkgewoJCQlpZiAoIXRoaXMucm9vdC5oaW50KQoJCQkJcmV0dXJuOwoJCQl0aGlzLnJvb3QuaGludC51cGRhdGUobnVsbCwgbnVsbCk7CgkJfSwKCQlnZXRfY2woKSB7CgkJCXJldHVybiAiYmluYXJ5LW9wZXJhdG9yLWlucHV0IiArICh0aGlzLmFuc3dlcl9pc19jb3JyZWN0KCkgJiYgIXRoaXMuaXNfZnVsbF9zcSh0aGlzLnVzZXJfYW5zd2VyKSAmJiB0aGlzLnVzZXJfYW5zd2VyICE9PSAiIiA/ICIgbWFyay1jb3JyZWN0IiA6IHRoaXMuYW5zd2VyX2lzX2NvcnJlY3QoKSAmJiB0aGlzLmlzX2Z1bGxfc3EodGhpcy51c2VyX2Fuc3dlcikgID8gIiBtYXJrLWNvcnJlY3Qtc3EiIDogdGhpcy5pc19ob3QoKSA/ICIgbWFyay1ob3QiIDogdGhpcy5pc19jb2xkKCkgJiYgdGhpcy51c2VyX2Fuc3dlciAhPT0gIiIgPyAiIG1hcmstY29sZCIgOiAiIik7CgkJfSwKCQlpc19ob3QoKSB7CgkJCXJldHVybih0aGlzLnVzZXJfYW5zd2VyIC0gdGhpcy5kYXRhIDw9IHRoaXMuZGF0YSAqIDAuMyAmJiB0aGlzLnVzZXJfYW5zd2VyID4gdGhpcy5kYXRhKTsKCQl9LAoJCWlzX2NvbGQoKSB7CgkJCXJldHVybih0aGlzLmRhdGEgLSB0aGlzLnVzZXJfYW5zd2VyIDw9IHRoaXMuZGF0YSAqIDAuMyAmJiB0aGlzLnVzZXJfYW5zd2VyIDwgdGhpcy5kYXRhKTsKCQl9LAoJCWFuc3dlcl9pc19jb3JyZWN0KCkgewoJCQlpZiAodHlwZW9mIHRoaXMudXNlcl9hbnN3ZXIgPT09ICJ1bmRlZmluZWQiIHx8ICF0aGlzLnVzZXJfYW5zd2VyLmxlbmd0aCkKCQkJCXJldHVybiBmYWxzZTsKCQkJaWYgKHRoaXMudXNlcl9hbnN3ZXIudG9Mb3dlckNhc2UoKSA9PSAibmFuIiAmJiBpc05hTih0aGlzLmRhdGEpKSAKCQkJCXJldHVybiB0cnVlOwoJCQlpZiAodGhpcy51c2VyX2Fuc3dlci50b0xvd2VyQ2FzZSgpID09ICItaW5mIiAmJiAodGhpcy5kYXRhID09IC1JbmZpbml0eSkpCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJaWYgKHRoaXMudXNlcl9hbnN3ZXIudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCJpbmYiKSAmJiAodGhpcy5kYXRhID09IEluZmluaXR5IHx8CgkJCQkJCU1hdGguYWJzKHRoaXMuZGF0YSkgPiBGTE9BVF9JTkYpKQoJCQkJcmV0dXJuIHRydWU7CgkJCWNvbnNvbGUubG9nKCJ1c2VyIGFuc3dlciIsIHRoaXMudXNlcl9hbnN3ZXIsICJyZWFsIGFuc3dlciIsIHRoaXMuZGF0YSwgImVwcyIsIHRoaXMucm9vdC5mbG9hdF9lcHMpOwoJCQlpZiAodGhpcy5vcCAhPSAidHJpZyIgJiYgdGhpcy5vcCAhPSAibG9nIikgewoJCQkJcmV0dXJuIHRoaXMudXNlcl9hbnN3ZXIgPT0gdGhpcy5kYXRhOwoJCQl9CgkJCWxldCB2YWwgPSBudWxsOwoJCQl0cnkKCQkJewoJCQkJbGV0IGV4cHIgPSBuZXcgRXhwcih0aGlzLnVzZXJfYW5zd2VyKTsKCQkJCXZhbCA9IGV4cHIuZXZhbCgpOwoJCQl9CgkJCWNhdGNoIChlKQoJCQl7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCgkJCWxldCByZXMgPSBNYXRoLmFicyh2YWwgLSB0aGlzLmRhdGEpIDw9IHRoaXMucm9vdC5mbG9hdF9lcHM7CgkJCXJldHVybiByZXM7CgkJfSwKCQlpc19mdWxsX3NxKG4pIHsKCQkJcmV0dXJuIE1hdGguc3FydChuKSAlIDEgPT09IDAKCQl9LAoJCWdldF9uZXh0KCkgewoJCQlsZXQgcm93ID0gdGhpcy5yb3c7CgkJCWxldCBjb2wgPSB0aGlzLmNvbDsKCQkJc3dpdGNoICh0aGlzLnJvb3Qub3JkZXIpIHsKCQkJCWNhc2UgIlJvdyI6CgkJCQkJY29sKys7CgkJCQkJaWYgKGNvbCA+IHRoaXMudGFibGVfZW5kKQoJCQkJCXsKCQkJCQkJY29sID0gMDsKCQkJCQkJcm93Kys7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJY2FzZSAiRGlhZ29uYWwiOgoJCQkJCXJvdysrOwoJCQkJCWNvbCsrOwoJCQkJCWlmIChjb2wgPiB0aGlzLnRhYmxlX2VuZCB8fCByb3cgPiB0aGlzLnRhYmxlX2VuZCkKCQkJCQl7CgkJCQkJCWxldCBkaWFnID0gcm93IC0gY29sOwoJCQkJCQlkaWFnID0gKGRpYWcgPj0gMCkgPyAtZGlhZy0xIDogLWRpYWc7CgkJCQkJCWlmIChkaWFnIDwgMCkgewoJCQkJCQkJcm93ID0gMDsKCQkJCQkJCWNvbCA9IHJvdyAtIGRpYWc7CgkJCQkJCX0KCQkJCQkJZWxzZSB7CgkJCQkJCQljb2wgPSAwOwoJCQkJCQkJcm93ID0gZGlhZyArIGNvbDsKCQkJCQkJfQoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2UgIlJhbmRvbSI6CgkJCQkJY29uc29sZS5sb2coIlJhbmRvbSIpOwoJCQkJCWJyZWFrOwoJCQl9CgkJCXJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnJvb3QuZ2V0X2lucHV0X2lkKHJvdywgY29sKSk7CgkJfSwKCQloYW5kbGVfaW5wdXQoZSkgewoJCQlzd2l0Y2ggKGUuZGF0YSkKCQkJewoJCQkJY2FzZSBTUVJUX0tFWToKCQkJCQl0aGlzLnVzZXJfYW5zd2VyID0gdGhpcy51c2VyX2Fuc3dlci5yZXBsYWNlKFNRUlRfS0VZLCBTUVJUX1NZTSk7CgkJCQkJYnJlYWs7CgkJCX0KCgkJCXRoaXMuY2hlY2tfYW5zd2VyKCk7CgkJfSwKCQljaGVja19hbnN3ZXIoKSB7CgkJCWlmICh0aGlzLmFuc3dlcl9pc19jb3JyZWN0KCkpCgkJCXsKCQkJCXRoaXMucm9vdC5jaGVja19hbGwoKTsKCQkJCWlmICh0aGlzLnJvb3QuaGludCkKCQkJCXsKCQkJCQl0aGlzLnJvb3QuaGludC5oYW5kbGVfc3VjY2VzcygpOwoJCQkJfQoJCQkJbGV0IGVsID0gdGhpcy5nZXRfbmV4dCgpOwoJCQkJaWYgKGVsKQoJCQkJCWVsLmZvY3VzKCk7CgkJCX0KCgkJfQoJfQp9Cg=="},{"version":3,"sources":["BinaryOperatorInput.vue"],"names":[],"mappings":";;;;;;AAMA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"BinaryOperatorInput.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<input  :class=\"get_cl()\" :id=\"root.get_input_id(row,col)\" type=\"input_type\" v-model=\"user_answer\"\n\t@input=\"handle_input\" @focus=\"set_hint()\" @focusout=\"clear_hint()\" inputmode=\"decimal\" />\n</template>\n<script>\n\nimport {SQRT_KEY, SQRT_SYM, Expr} from '../lib/expr.js';\n\nconst FLOAT_INF = 1e10;\n\nexport default {\n\tname: 'BinaryOperatorInput',\n\tprops: [\"root\", \"row\", \"col\", \"data\", \"op\", \"chart\", \"a\", \"b\"],\n\t\tdata() {\n\t\treturn {\n\t\t\tuser_answer: \"\"\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.root.answer_inputs[this.$vnode.key] = this;\n\t\tif (this.row == this.chart.range_start() && this.col == this.chart.range_start())\n\t\t{\n\t\t\tlet id = this.root.get_input_id(0, 0);\n\t\t\tlet el = document.getElementById(id);\n\t\t\tif (el)\n\t\t\t\tel.focus();\n\t\t}\n\t},\n\tcomputed: {\n\t\tinput_type() {\n\t\t\tswitch (this.op)\n\t\t\t{\n\t\t\t\tcase \"trig\": return \"text\";\n\t\t\t\tdefault: return \"number\";\n\t\t\t}\n\t\t},\n\t\ttable_end() {\n\t\t\treturn this.root.table_len - this.chart.range_start()\n\t\t}\n\t},\n\tmethods: {\n\t\tset_hint() {\n\t\t\tif (!this.root.hint)\n\t\t\t\treturn;\n\t\t\tthis.root.hint.update(this.a, this.b);\n\t\t},\n\t\tclear_hint() {\n\t\t\tif (!this.root.hint)\n\t\t\t\treturn;\n\t\t\tthis.root.hint.update(null, null);\n\t\t},\n\t\tget_cl() {\n\t\t\treturn \"binary-operator-input\" + (this.answer_is_correct() && !this.is_full_sq(this.user_answer) && this.user_answer !== \"\" ? \" mark-correct\" : this.answer_is_correct() && this.is_full_sq(this.user_answer)  ? \" mark-correct-sq\" : this.is_hot() ? \" mark-hot\" : this.is_cold() && this.user_answer !== \"\" ? \" mark-cold\" : \"\");\n\t\t},\n\t\tis_hot() {\n\t\t\treturn(this.user_answer - this.data <= this.data * 0.3 && this.user_answer > this.data);\n\t\t},\n\t\tis_cold() {\n\t\t\treturn(this.data - this.user_answer <= this.data * 0.3 && this.user_answer < this.data);\n\t\t},\n\t\tanswer_is_correct() {\n\t\t\tif (typeof this.user_answer === \"undefined\" || !this.user_answer.length)\n\t\t\t\treturn false;\n\t\t\tif (this.user_answer.toLowerCase() == \"nan\" && isNaN(this.data)) \n\t\t\t\treturn true;\n\t\t\tif (this.user_answer.toLowerCase() == \"-inf\" && (this.data == -Infinity))\n\t\t\t\treturn true;\n\t\t\tif (this.user_answer.toLowerCase().startsWith(\"inf\") && (this.data == Infinity ||\n\t\t\t\t\t\tMath.abs(this.data) > FLOAT_INF))\n\t\t\t\treturn true;\n\t\t\tconsole.log(\"user answer\", this.user_answer, \"real answer\", this.data, \"eps\", this.root.float_eps);\n\t\t\tif (this.op != \"trig\" && this.op != \"log\") {\n\t\t\t\treturn this.user_answer == this.data;\n\t\t\t}\n\t\t\tlet val = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlet expr = new Expr(this.user_answer);\n\t\t\t\tval = expr.eval();\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet res = Math.abs(val - this.data) <= this.root.float_eps;\n\t\t\treturn res;\n\t\t},\n\t\tis_full_sq(n) {\n\t\t\treturn Math.sqrt(n) % 1 === 0\n\t\t},\n\t\tget_next() {\n\t\t\tlet row = this.row;\n\t\t\tlet col = this.col;\n\t\t\tswitch (this.root.order) {\n\t\t\t\tcase \"Row\":\n\t\t\t\t\tcol++;\n\t\t\t\t\tif (col > this.table_end)\n\t\t\t\t\t{\n\t\t\t\t\t\tcol = 0;\n\t\t\t\t\t\trow++;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Diagonal\":\n\t\t\t\t\trow++;\n\t\t\t\t\tcol++;\n\t\t\t\t\tif (col > this.table_end || row > this.table_end)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet diag = row - col;\n\t\t\t\t\t\tdiag = (diag >= 0) ? -diag-1 : -diag;\n\t\t\t\t\t\tif (diag < 0) {\n\t\t\t\t\t\t\trow = 0;\n\t\t\t\t\t\t\tcol = row - diag;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcol = 0;\n\t\t\t\t\t\t\trow = diag + col;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Random\":\n\t\t\t\t\tconsole.log(\"Random\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn document.getElementById(this.root.get_input_id(row, col));\n\t\t},\n\t\thandle_input(e) {\n\t\t\tswitch (e.data)\n\t\t\t{\n\t\t\t\tcase SQRT_KEY:\n\t\t\t\t\tthis.user_answer = this.user_answer.replace(SQRT_KEY, SQRT_SYM);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.check_answer();\n\t\t},\n\t\tcheck_answer() {\n\t\t\tif (this.answer_is_correct())\n\t\t\t{\n\t\t\t\tthis.root.check_all();\n\t\t\t\tif (this.root.hint)\n\t\t\t\t{\n\t\t\t\t\tthis.root.hint.handle_success();\n\t\t\t\t}\n\t\t\t\tlet el = this.get_next();\n\t\t\t\tif (el)\n\t\t\t\t\tel.focus();\n\t\t\t}\n\n\t\t}\n\t}\n}\n</script>\n"]}]}